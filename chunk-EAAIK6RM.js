import{a as _e,b as ge,c as he,d as xe}from"./chunk-BWMA6NOS.js";import{a as Ce}from"./chunk-UUCXUX5D.js";import"./chunk-HK7VWWZT.js";import{c as ue}from"./chunk-VNTIRP7P.js";import"./chunk-ZDR62SAN.js";import{a as fe,b as ve}from"./chunk-6WKTYTQZ.js";import"./chunk-NBLIVHWZ.js";import"./chunk-K5A4TSQI.js";import{b as G,c as Q}from"./chunk-VEY35CTR.js";import{_ as N,aa as pe,ba as z,ca as P}from"./chunk-SDSHYV7S.js";import"./chunk-H7BDRFGO.js";import{b as de,c as V,d as k,e as U}from"./chunk-ZBK5467C.js";import"./chunk-J3G3BBGS.js";import{$ as ie,$b as m,Aa as I,Db as j,Eb as d,Gb as R,Hb as B,Ib as l,J,Jb as r,Kb as p,N as te,Ob as K,Rb as w,Tb as u,Xb as ae,Yb as le,Zb as ce,aa as C,ac as _,bc as h,ca as ne,cb as o,cc as me,cd as se,db as f,ec as M,fa as oe,fc as O,gc as E,ka as re,la as b,m as T,n as H,qa as y,s as Z,t as F,vb as v,x as ee,xb as s,yc as $,za as S,zb as A}from"./chunk-FIIJ44BK.js";var W=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.CATALOG=1]="CATALOG",e[e.CONTENT=2]="CONTENT",e}(W||{});var x=(()=>{let t=class t{constructor(a){this._httpClient=a,this._item=new H(null),this._items=new H(null)}get items$(){return this._items.asObservable()}get item$(){return this._item.asObservable()}getItems(a=null){return this._httpClient.get("api/apps/file-manager",{params:{folderId:a}}).pipe(ne(i=>{this._items.next(i)}))}getItemById(a){return this._items.pipe(te(1),ee(i=>{let c=[...i.folders,...i.files].find(g=>g.id===a)||null;return this._item.next(c),c}),ie(i=>i?Z(i):F("Could not found the item with id of "+a+"!")))}};t.\u0275fac=function(i){return new(i||t)(re(se))},t.\u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ke=["matDrawer"],De=()=>["/apps/file-manager"],ye=e=>["/apps/file-manager/folders/",e],Me=e=>["./details/",e];function Le(e,t){if(e&1&&m(0),e&2){let n=u();me(" ",n.items.folders.length," folders, ",n.items.files.length," files ")}}function Te(e,t){if(e&1&&(l(0,"a",17),m(1),r()),e&2){let n=u().$implicit;s("routerLink",E(2,ye,n.id)),o(),_(n.name)}}function Ae(e,t){if(e&1&&(l(0,"div"),m(1),r()),e&2){let n=u().$implicit;o(),_(n.name)}}function je(e,t){e&1&&(l(0,"div",18),m(1,"/"),r())}function Re(e,t){if(e&1&&v(0,Te,2,4,"a",17)(1,Ae,2,1,"div")(2,je,2,0,"div",18),e&2){let n=t.$index,a=t.$count;d(n!==a-1?0:-1),o(),d(n===a-1?1:-1),o(),d(n!==a-1?2:-1)}}function Be(e,t){if(e&1&&(l(0,"div",9)(1,"a",17),m(2,"Home "),r(),l(3,"div",18),m(4,"/"),r(),R(5,Re,3,3,null,null,j().trackByFn,!0),r()),e&2){let n=u();o(),s("routerLink",O(1,De)),o(4),B(n.items.path)}}function Oe(e,t){if(e&1&&(l(0,"div",30),m(1),r()),e&2){let n=u().$implicit;o(),h(" ",n.contents," ")}}function $e(e,t){if(e&1){let n=K();l(0,"div",21)(1,"a",22),w("click",function(i){return S(n),I(i.preventDefault())}),p(2,"mat-icon",23),r(),l(3,"a",24)(4,"div",25)(5,"div",26),p(6,"mat-icon",27),r()(),l(7,"div",28)(8,"div",29),m(9),r(),v(10,Oe,2,1,"div",30),r()()()}if(e&2){let n=t.$implicit;o(),s("routerLink",E(7,Me,n.id)),o(),s("svgIcon","heroicons_solid:information-circle"),o(),s("routerLink",E(9,ye,n.id)),o(3),s("svgIcon","heroicons_solid:folder"),o(2),s("matTooltip",n.name),o(),h(" ",n.name," "),o(),d(n.contents?10:-1)}}function Ve(e,t){if(e&1&&(l(0,"div")(1,"div",19),m(2,"Folders"),r(),l(3,"div",20),R(4,$e,11,11,"div",21,j().trackByFn,!0),r()()),e&2){let n=u(2);o(4),B(n.items.folders)}}function Ue(e,t){if(e&1&&(l(0,"div",30),m(1),r()),e&2){let n=u().$implicit;o(),h(" ",n.contents," ")}}function Ne(e,t){if(e&1&&(l(0,"a",31)(1,"div",25)(2,"div",26)(3,"div",32),p(4,"mat-icon",27),l(5,"div",33),m(6),r()()()(),l(7,"div",28)(8,"div",29),m(9),r(),v(10,Ue,2,1,"div",30),r()()),e&2){let n=t.$implicit;s("routerLink",E(16,Me,n.id)),o(4),s("svgIcon","heroicons_solid:document"),o(),A("bg-red-600",n.type==="PDF")("bg-blue-600",n.type==="DOC")("bg-green-600",n.type==="XLS")("bg-gray-600",n.type==="TXT")("bg-amber-600",n.type==="JPG"),o(),h(" ",n.type.toUpperCase()," "),o(2),s("matTooltip",n.name),o(),h(" ",n.name," "),o(),d(n.contents?10:-1)}}function ze(e,t){if(e&1&&(l(0,"div")(1,"div",19),m(2,"Files"),r(),l(3,"div",20),R(4,Ne,11,18,"a",31,j().trackByFn,!0),r()()),e&2){let n=u(2);o(4),B(n.items.files)}}function Pe(e,t){if(e&1&&(l(0,"div",15),v(1,Ve,6,0,"div")(2,ze,6,0,"div"),r()),e&2){let n=u();o(),d(n.items.folders.length>0?1:-1),o(),d(n.items.files.length>0?2:-1)}}function Ge(e,t){e&1&&(l(0,"div",16),p(1,"mat-icon",34),l(2,"div",35),m(3," There are no items! "),r()()),e&2&&(o(),s("svgIcon","heroicons_outline:folder-open"))}var D=(()=>{let t=class t{constructor(a,i,c,g,L,X){this._activatedRoute=a,this._changeDetectorRef=i,this._router=c,this._fileManagerService=g,this._fuseMediaWatcherService=L,this._aiService=X,this._unsubscribeAll=new T,this.fileName="Select File"}ngOnInit(){this.getAllFile(),this._fileManagerService.items$.pipe(C(this._unsubscribeAll)).subscribe(a=>{this.items=a,this._changeDetectorRef.markForCheck()}),this._fileManagerService.item$.pipe(C(this._unsubscribeAll)).subscribe(a=>{this.selectedItem=a,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe(C(this._unsubscribeAll)).subscribe(a=>{this.drawerMode=a.matches?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(a,i){return i.id||a}selectFile(a){if(a.target.files&&a.target.files[0]){let i=a.target.files[0];this.currentFile=i,this.fileName=this.currentFile.name}else this.fileName="Select File"}getAllFile(){let a={user_id:"E1",product:"Komatsu WA320-5 SN 60001-UP (KomatsuTRAX(GPRS)) Parts manual Wheel Loader",file:this.currentFile,type:W.CONTENT};this._aiService.getAllFile().subscribe(i=>{console.log(i)},i=>{console.log(i)})}uploadFile(){let a={user_id:"E2",product:this.fileName.slice(0,-4),file:this.currentFile,type:W.CATALOG};console.log(a),this._aiService.uploadFile(a).subscribe(i=>{console.log(i)},i=>{console.log(i)})}};t.\u0275fac=function(i){return new(i||t)(f(de),f($),f(k),f(x),f(ue),f(Ce))},t.\u0275cmp=y({type:t,selectors:[["file-manager-list"]],viewQuery:function(i,c){if(i&1&&ae(ke,7),i&2){let g;le(g=ce())&&(c.matDrawer=g.first)}},standalone:!0,features:[M],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","h-full","flex-auto","dark:bg-transparent",3,"backdropClick"],[1,"w-full","dark:bg-gray-900","sm:w-100",3,"mode","opened","position","disableClose"],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-auto","flex-col"],[1,"bg-card","flex","flex-col","items-start","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:py-12","md:px-8"],[1,"text-4xl","font-extrabold","leading-none","tracking-tight"],[1,"text-secondary","mt-0.5","flex","items-center","font-medium"],[1,"flex","items-center","space-x-2"],[1,"mt-4","sm:mt-0"],["type","file","id","fileInput","name","fileInput",3,"change"],["mat-flat-button","",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"space-y-8","p-6","md:p-8"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"cursor-pointer","text-primary",3,"routerLink"],[1,""],[1,"font-medium"],[1,"-m-2","mt-2","flex","flex-wrap"],[1,"bg-card","relative","m-2","h-40","w-40","rounded-2xl","p-4","shadow"],["mat-icon-button","",1,"absolute","right-1.5","top-1.5","z-20","h-8","min-h-8","w-8",3,"click","routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"absolute","inset-0","z-10","flex","cursor-pointer","flex-col","p-4",3,"routerLink"],[1,"aspect-[9/6]"],[1,"flex","h-full","items-center","justify-center"],[1,"text-hint","opacity-50","icon-size-14",3,"svgIcon"],[1,"flex","flex-auto","flex-col","justify-center","text-center","text-sm","font-medium"],[1,"truncate",3,"matTooltip"],[1,"text-secondary","truncate"],[1,"bg-card","m-2","flex","h-40","w-40","cursor-pointer","flex-col","rounded-2xl","p-4","shadow",3,"routerLink"],[1,"relative"],[1,"absolute","bottom-0","left-0","rounded","px-1.5","text-sm","font-semibold","leading-5","text-white"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(i,c){if(i&1){let g=K();l(0,"div",1)(1,"mat-drawer-container",2),w("backdropClick",function(){return S(g),I(c.onBackdropClicked())}),l(2,"mat-drawer",3,0),p(4,"router-outlet"),r(),l(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),m(10," File Manager "),r(),l(11,"div",8),v(12,Le,1,2)(13,Be,7,2,"div",9),r()(),l(14,"div",10)(15,"input",11),w("change",function(X){return S(g),I(c.selectFile(X))}),r(),l(16,"button",12),w("click",function(){return S(g),I(c.uploadFile())}),p(17,"mat-icon",13),l(18,"span",14),m(19,"Upload file"),r()()()(),v(20,Pe,3,2,"div",15)(21,Ge,4,1,"div",16),r()()()()}i&2&&(o(2),s("mode",c.drawerMode)("opened",!1)("position","end")("disableClose",!0),o(10),d(c.items.path.length?-1:12),o(),d(c.items.path.length?13:-1),o(3),s("color","primary"),o(),s("svgIcon","heroicons_outline:plus"),o(3),d(c.items&&(c.items.folders.length>0||c.items.files.length>0)?20:21))},dependencies:[xe,ge,he,_e,V,U,P,N,z,Q,G,ve,fe],encapsulation:2,changeDetection:0});let e=t;return e})();var We=()=>["../../"];function Xe(e,t){e&1&&p(0,"mat-icon",6),e&2&&s("svgIcon","heroicons_outline:folder")}function He(e,t){e&1&&p(0,"mat-icon",6),e&2&&s("svgIcon","heroicons_outline:document")}function Je(e,t){if(e&1&&(l(0,"div",12)(1,"div",13),m(2,"Contents"),r(),l(3,"div"),m(4),r()()),e&2){let n=u();o(4),_(n.item.contents)}}function Ke(e,t){if(e&1&&(l(0,"div"),m(1),r()),e&2){let n=u();o(),_(n.item.description)}}function qe(e,t){e&1&&(l(0,"div",20),m(1," Click here to add a description "),r())}var Y=(()=>{let t=class t{constructor(a,i,c){this._changeDetectorRef=a,this._fileManagerListComponent=i,this._fileManagerService=c,this._unsubscribeAll=new T}ngOnInit(){this._fileManagerListComponent.matDrawer.open(),this._fileManagerService.item$.pipe(C(this._unsubscribeAll)).subscribe(a=>{this._fileManagerListComponent.matDrawer.open(),this.item=a,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._fileManagerListComponent.matDrawer.close()}trackByFn(a,i){return i.id||a}};t.\u0275fac=function(i){return new(i||t)(f($),f(D),f(x))},t.\u0275cmp=y({type:t,selectors:[["file-manager-details"]],standalone:!0,features:[M],decls:51,vars:28,consts:[[1,"flex","flex-auto","flex-col","p-6","md:p-8"],[1,"flex","items-center","justify-end"],["mat-icon-button","",3,"routerLink"],[3,"svgIcon"],[1,"mt-8","aspect-[9/6]"],[1,"flex","h-full","items-center","justify-center","rounded-lg","border","bg-gray-50","dark:bg-card"],[1,"text-hint","icon-size-24",3,"svgIcon"],[1,"mt-8","flex","flex-col","items-start"],[1,"text-xl","font-medium"],[1,"mt-1","rounded","px-1.5","text-sm","font-semibold","leading-5","text-white"],[1,"mt-8","text-lg","font-medium"],[1,"mt-4","flex","flex-col","divide-y","border-b","border-t","font-medium"],[1,"flex","items-center","justify-between","py-3"],[1,"text-secondary"],[1,"mt-8","flex","items-center","justify-between"],[1,"text-lg","font-medium"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"mt-2","flex","border-t"],[1,"py-3"],[1,"text-secondary","italic"],[1,"mt-8","grid","w-full","grid-cols-2","gap-4"],["mat-flat-button","",1,"flex-auto",3,"color"],["mat-stroked-button","",1,"flex-auto"]],template:function(i,c){i&1&&(l(0,"div",0)(1,"div",1)(2,"a",2),p(3,"mat-icon",3),r()(),l(4,"div",4)(5,"div",5),v(6,Xe,1,1,"mat-icon",6)(7,He,1,1,"mat-icon",6),r()(),l(8,"div",7)(9,"div",8),m(10),r(),l(11,"div",9),m(12),r()(),l(13,"div",10),m(14,"Information"),r(),l(15,"div",11)(16,"div",12)(17,"div",13),m(18,"Created By"),r(),l(19,"div"),m(20),r()(),l(21,"div",12)(22,"div",13),m(23,"Created At"),r(),l(24,"div"),m(25),r()(),l(26,"div",12)(27,"div",13),m(28,"Modified At"),r(),l(29,"div"),m(30),r()(),l(31,"div",12)(32,"div",13),m(33,"Size"),r(),l(34,"div"),m(35),r()(),v(36,Je,5,1,"div",12),r(),l(37,"div",14)(38,"div",15),m(39,"Description"),r(),l(40,"button",16),p(41,"mat-icon",17),r()(),l(42,"div",18)(43,"div",19),v(44,Ke,2,1,"div")(45,qe,2,0,"div",20),r()(),l(46,"div",21)(47,"button",22),m(48," Download "),r(),l(49,"button",23),m(50,"Delete"),r()()()),i&2&&(o(2),s("routerLink",O(27,We)),o(),s("svgIcon","heroicons_outline:x-mark"),o(3),d(c.item.type==="folder"?6:-1),o(),d(c.item.type!=="folder"?7:-1),o(3),_(c.item.name),o(),A("bg-indigo-600",c.item.type==="folder")("bg-red-600",c.item.type==="PDF")("bg-blue-600",c.item.type==="DOC")("bg-green-600",c.item.type==="XLS")("bg-gray-600",c.item.type==="TXT")("bg-amber-600",c.item.type==="JPG"),o(),h(" ",c.item.type.toUpperCase()," "),o(8),_(c.item.createdBy),o(5),_(c.item.createdAt),o(5),_(c.item.modifiedAt),o(5),_(c.item.size),o(),d(c.item.contents?36:-1),o(5),s("svgIcon","heroicons_solid:pencil"),o(3),d(c.item.description?44:-1),o(),d(c.item.description?-1:45),o(2),s("color","primary"))},dependencies:[P,N,z,pe,U,Q,G],encapsulation:2,changeDetection:0});let e=t;return e})();var Fe=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=y({type:t,selectors:[["file-manager"]],standalone:!0,features:[M],decls:1,vars:0,template:function(i,c){i&1&&p(0,"router-outlet")},dependencies:[V],encapsulation:2,changeDetection:0});let e=t;return e})();var Ye=(e,t)=>{let n=b(x),a=b(k);return n.getItems(e.paramMap.get("folderId")).pipe(J(i=>{console.error(i);let c=t.url.split("/").slice(0,-1).join("/");return a.navigateByUrl(c),F(i)}))},Se=(e,t)=>{let n=b(x),a=b(k);return n.getItemById(e.paramMap.get("id")).pipe(J(i=>{console.error(i);let c=t.url.split("/").slice(0,-1).join("/");return a.navigateByUrl(c),F(i)}))},Ie=(e,t,n,a)=>{let i=a.root;for(;i.firstChild;)i=i.firstChild;return!a.url.includes("/file-manager")||a.url.includes("/details")?!0:e.closeDrawer().then(()=>!0)},Et=[{path:"",component:Fe,children:[{path:"folders/:folderId",component:D,resolve:{item:Ye},children:[{path:"details/:id",component:Y,resolve:{item:Se},canDeactivate:[Ie]}]},{path:"",component:D,resolve:{items:()=>b(x).getItems()},children:[{path:"details/:id",component:Y,resolve:{item:Se},canDeactivate:[Ie]}]}]}];export{Et as default};
